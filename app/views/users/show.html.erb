<%- model_class = User -%>
<% provide(:title, "User Profile") %>
<%= render :partial => 'layouts/header', locals: {page_name: 'User Profile'} %>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:name) %>:</strong></dt>
  <dd><%= @user.name %></dd>
  <dt><strong><%= model_class.human_attribute_name(:account) %>:</strong></dt>
  <dd><%= @user.account %></dd>
  <dt><strong><%= model_class.human_attribute_name("作成した問題数") %>:</strong></dt>
  <dd><%= @user.create_questions.length%></dd>
  <dt><strong><%= model_class.human_attribute_name("正答した問題数") %>:</strong></dt>
  <dd><%= @user.questions.length %></dd>


</dl>
<p>作成した問題</p>
<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:number) %></th>
      <th><%= model_class.human_attribute_name(:title) %></th>
      <th><%= model_class.human_attribute_name(:created_by) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>

    <% @user.create_questions.each do |question| %>
    <tr>
      <td><%= link_to question.id, question_path(question) %></td>
      <td><%= question.title %></td>
      <td><%= question.created_user.name %></td>
      <%if current_user == question.created_user%>
      <td>
        <%= link_to t('.edit', :default => t("helpers.links.edit")),
        edit_question_path(question), :class => 'btn btn-default btn-xs' %>
        <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
        question_path(question),
        :method => :delete,
        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
        :class => 'btn btn-xs btn-danger' %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>

<p>解いた問題</p>
<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:number) %></th>
      <th><%= model_class.human_attribute_name(:title) %></th>
      <th><%= model_class.human_attribute_name(:created_by) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @user.questions.each do |question| %>
    <tr>
      <td><%= link_to question.id, question_path(question) %></td>
      <td><%= question.title %></td>
      <td><%= question.created_user.name %></td>
      <%if current_user == question.user%>
      <td>
        <%= link_to t('.edit', :default => t("helpers.links.edit")),
        edit_question_path(question), :class => 'btn btn-default btn-xs' %>
        <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
        question_path(question),
        :method => :delete,
        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
        :class => 'btn btn-xs btn-danger' %>
      </td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>




<%= link_to t('.back', :default => t("helpers.links.back")),
main_menu_path, :class => 'btn btn-default'  %>
<% if current_user == @user %>
<%= link_to "Log out", logout_path,:method => 'delete',:class => 'btn btn-default'%>

<%= link_to t('.edit', :default => t("helpers.links.edit")),
edit_user_path(@user), :class => 'btn btn-default' %>

<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
user_path(@user),
:method => 'delete',
:data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
:class => 'btn btn-danger' %>
<% end %>